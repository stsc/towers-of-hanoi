<!--
#
# towers-of-hanoi - Simple web-based towers of hanoi implementation
#
# Copyright (c) 2009, 2025 Steven Schubiger
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
-->
<html lang="en">
  <head>
    <meta name="author" content="Steven Schubiger">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <title>Towers of Hanoi</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="js/prototype.js" type="text/javascript"></script>
    <script src="js/scriptaculous.js" type="text/javascript"></script>
    <script src="js/effects.js" type="text/javascript"></script>
    <script src="js/dragdrop.js" type="text/javascript"></script>
    <script src="js/controls.js" type="text/javascript"></script>
    <script src="exchange.js" type="text/javascript"></script>
  </head>
  <body>
    <div class="center">
      <b style="font-size:20px">TOWERS OF HANOI</b> [<a href="https://en.wikipedia.org/wiki/Tower_of_Hanoi" target="_blank" style="font-size:15px">wikipedia</a>]
      <p>
        The objective of the puzzle is to move the <i>entire stack to the third rod</i>, obeying the following rules:
      <ol>
        <li><i>Only one disk</i> may be moved at a time.</li>
        <li>Each move consists of taking the <i>upper disk from one of the stacks</i> and placing it <i>on top of another stack</i> or on an <i>empty rod</i>.</li>
        <li><i>No disk may be placed on top of a disk that is smaller than it.</i></li>
      </ol>
    </div>
    <table align="center">
      <tr>
        <td><span style="font-size:12px" class="keys"><b>keys</b><br>p: pause/resume<br>r: reset</span></td>
        <td></td>
        <td align="center"><b><span id="optimum" class="status">&nbsp;</span></b></td>
      </tr>
      <tr>
        <td align="center"><div id="1" class="rings"><div id="1_inner" class="ring_first">1</div></div></td>
        <td align="center"><div id="5" class="rings"><div id="5_inner" class="ring_blank"></div></div></td>
        <td align="center"><div id="9" class="rings"><div id="9_inner" class="ring_blank"></div></div></td>
      </tr>
      <tr>
        <td align="center"><div id="2" class="rings"><div id="2_inner" class="ring_second">2</div></div></td>
        <td align="center"><div id="6" class="rings"><div id="6_inner" class="ring_blank"></div></div></td>
        <td align="center"><div id="10" class="rings"><div id="10_inner" class="ring_blank"></div></div></td>
      </tr>
      <tr>
        <td align="center"><div id="3" class="rings"><div id="3_inner" class="ring_third">3</div></div></td>
        <td align="center"><div id="7" class="rings"><div id="7_inner" class="ring_blank"></div></div></td>
        <td align="center"><div id="11" class="rings"><div id="11_inner" class="ring_blank"></div></div></td>
      </tr>
      <tr>
        <td align="center"><div id="4" class="rings"><div id="4_inner" class="ring_fourth">4</div></div></td>
        <td align="center"><div id="8" class="rings"><div id="8_inner" class="ring_blank"></div></div></td>
        <td align="center"><div id="12" class="rings"><div id="12_inner" class="ring_blank"></div></div></td>
      </tr>
      <tr>
        <td align="left"><div class="status"><a href="javascript:location.reload()">reset</a> -- [ <span id="moves">0</span> moves / <span id="timer">0</span>s ] -- <span id="progress">READY.</span></div></td>
        <td></td>
        <td align="right"><code>v0.01 | <a href="https://github.com/stsc/towers-of-hanoi/" target="_blank">source</a></code></td>
      </tr>
    </table>
  <script>

let begin = true;
let end   = false;

let timerId;
let setTimer = false;
let secs     = 0;

function update_timer() {
    document.getElementById('timer').textContent = ++secs;
}

function pause_resume() {
    if (setTimer) {
        clearInterval(timerId);
        setTimer = false;
    }
    else {
        timerId = setInterval(update_timer, 1000);
        setTimer = true;
    }
}

document.addEventListener('keydown', function(event) {
    switch (event.key) {
        case 'p':
          if (!end) pause_resume();
          break;
        case 'r':
          location.reload();
          break;
        default:
          break;
    }
});

new Draggable('1_inner',  { revert: true });
new Draggable('2_inner',  { revert: true });
new Draggable('3_inner',  { revert: true });
new Draggable('4_inner',  { revert: true });
new Draggable('5_inner',  { revert: true });
new Draggable('6_inner',  { revert: true });
new Draggable('7_inner',  { revert: true });
new Draggable('8_inner',  { revert: true });
new Draggable('9_inner',  { revert: true });
new Draggable('10_inner', { revert: true });
new Draggable('11_inner', { revert: true });
new Draggable('12_inner', { revert: true });

// see exchange.js for definition of exchange()
Droppables.add('1',  { onDrop: exchange });
Droppables.add('2',  { onDrop: exchange });
Droppables.add('3',  { onDrop: exchange });
Droppables.add('4',  { onDrop: exchange });
Droppables.add('5',  { onDrop: exchange });
Droppables.add('6',  { onDrop: exchange });
Droppables.add('7',  { onDrop: exchange });
Droppables.add('8',  { onDrop: exchange });
Droppables.add('9',  { onDrop: exchange });
Droppables.add('10', { onDrop: exchange });
Droppables.add('11', { onDrop: exchange });
Droppables.add('12', { onDrop: exchange });

  </script>
  </body>
</html>
